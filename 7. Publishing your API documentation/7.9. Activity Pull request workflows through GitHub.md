# ![idea](https://github.com/Starkovden/Documenting_APIs/blob/master/1.%20Introduction%20to%20REST%20APIs/pics/1.jpg?raw=true) Практическое занятие: процесс Pull request на GitHub

На предыдущем занятии Упражнение: [Используем клиент GitHub для десктопа](https://github.com/Starkovden/Documenting_APIs/blob/master/7.%20Publishing%20your%20API%20documentation/7.8.%20Activity%20Use%20the%20GitHub%20Desktop%20client.md), мы использовали Github Desktop для управления рабочим процессом коммитов, ветвления и слияния. На этом занятии мы будем выполнять аналогичные действия, но с использованием браузерного интерфейса, который предоставляет Github, вместо использования терминала или Github Desktop.

Понимание процесса **Pull request** является важным для анализа изменений в опен-сорс проекте с несколькими участниками. Использование интерфейса GitHub также удобно, если рецензенты не знакомы с терминалом или Github Desktop.

[Создание изменение в отдельной ветке](#edits)

[Создание Pull request](#createPullRequest)

[Процесс Pull request](#processPullRequest)

[Добавление участников в проект](#addCollaborator)

<a name="edits"></a>
## Создание изменение в отдельной ветке

По умолчанию в новом репозитории есть одна ветка с именем «Master». Обычно, когда при внесении изменений или просмотра / редактировании, создается новая ветка и вносятся все изменения в ветку. Затем, по окончании, владелец репо объединяет изменения из новой ветки в «Master» через «pull request».

> Можно выполнять эти операции, используя команды Git в терминале, а также Можно выполнять их в интерфейсе браузера. Интерфейс браузера может быть полезен, если людей, вносящих изменения в ваш контент.

Для создания изменений в отдельной ветке:

1. Со стороны рецензента переходим к тому же репозиторию GitHub, который был создан на предыдущем занятии (можно создать новый репо). Создаем новую ветку, выбрав раскрывающееся меню ветки и введя имя новой ветки, например «sme-review». Затем нажмите клавишу Enter.

![new branch](https://github.com/Starkovden/Documenting_APIs/blob/master/7.%20Publishing%20your%20API%20documentation/pics/10.png?raw=true)

> Создание новой ветки

При создании новой ветки, содержимое из главной (или любой другой ветки, которая сейчас просматривается) копируется в новую ветку. Процесс похож на «Сохранить как» с существующим документом.

2. Кликаем в область ввода текста, а затем кликаем по иконке карандаша («Edit this file»), чтобы отредактировать файл.

![make edits](https://github.com/Starkovden/Documenting_APIs/blob/master/7.%20Publishing%20your%20API%20documentation/pics/12.png?raw=true)

> Редактирование файла

3. Вносим изменения в контент и прокручиваем вниз экрана до области **Commit changes**. Поясняем причину изменений и подтверждаем изменения в своей ветке *sme-review*, нажав кнопку `Commit changes`.

Рецензенты могут продолжать вносить изменения таким образом, пока не закончат просмотр всей документации. Все изменения делаются в этой новой ветке, а не в мастере.

<a name="createPullRequest"></a>
## Создание Pull request

Теперь представим, что процесс проверки завершен, и пришло время объединить ветку с мастером. Ветка объединяется с "Master" через `Pull request`. Любой «соавтор» в команде с правами на запись может инициировать и завершить Pull request (добавлять соавторов можете в «Настройки»> «Соавторы)

Для создания Pull request:

1. Находим на экране вкладку "Pull request".

2. Кликаем по кнопке `New pull request`

![New pull request](https://github.com/Starkovden/Documenting_APIs/blob/master/7.%20Publishing%20your%20API%20documentation/pics/13.png?raw=true)

> New pull request

3. Выбираем ветку (*sme-review*), которую хотим сравнить с веткой "Master"

![compare](https://github.com/Starkovden/Documenting_APIs/blob/master/7.%20Publishing%20your%20API%20documentation/pics/14.png?raw=true)

> Сравниваем, чтобы увидеть, можно ли объединить ветви

Когда мы сравниваем ветку с мастером, мы увидим список всех изменений. Мы можем просмотреть изменения в двух режимах просмотра: Unified или Split (это вкладки, показанные справа от содержимого). Unified показывает правки вместе в одной области содержимого, тогда как split показывает два файла рядом.

4. Кликаем на кнопку `Create pull request`.
5. Поясняем pull request и снова кликаем кнопку `Create pull request`.

Владелец репозитория увидит pull request и сможет принять меры для его объединения.

<a name="processPullRequest"></a>
## Процесс Pull request

Теперь посмотрим на процесс со стороны владельцем проекта, который получил новый Pull request. Владельцу нужно обработать Pull request и объединить ветку *sme-review* с "Master".

1. Переходим на вкладку "Pull requests", чтобы увидеть ожидающие запросы на извлечение.
2. Кликаем по запросу и смотрим изменения, выбрав вкладку **Files changed**.

![Files changed](https://github.com/Starkovden/Documenting_APIs/blob/master/7.%20Publishing%20your%20API%20documentation/pics/15.png?raw=true)

> Просмотр изменений в файле

> Для реализации выборочных изменений, переходим в ветку *sme-review* и вносим обновления перед обработкой pull request. Pull request не дает построчную информацию о том, какие изменения мы хотим принять или отклонить (например, в Microsoft Word "Отслеживать изменения"). Слияние запросов - это процесс «все или ничего». Можно нажать кнопку `Review changes`, добавить несколько комментариев, а затем установить переключатель «Request changes», попросив рецензента внести изменения.

Также стоит обратить внимание, что если запрос на извлечение выполняется для более старой версии мастера, где исходное содержимое мастера больше не существует или перемещено в другое место, процесс слияния будет более трудным для выполнения.

3. Переходим на вкладку "Conversation" и кликаем кнопку `Merge pull request`.
4. кликаем `Confirm merge`.

Ветка *sme-review* объединяется с мастером. Теперь "Master" и ветка *sme-review* совпадают (ветки "смержены").

5. Кликаем кнопку `Delete branch` для удаления ветки *sme-review*.

Не обязательно удалять ветку сразу. Старые ветки всегда можете удалить , щелкнув ссылку на ветки при просмотре репозитория Github, а затем нажмите кнопку `Delete` (корзина) рядом с веткой.

Если посмотреть на список веток, то после удаления ветка *sme-review* больше не отображается.

<a name="addCollaborator"></a>
## Добавление участников в проект

Иногда необходимо добавлять соавторов в проект Github, чтобы они могли вносить изменения в ветку. Если другие участники проекта, не являясь соавторами, захотят внести изменения, они получат сообщение об ошибке. ([Inviting collaborators to a personal repository](https://help.github.com/articles/inviting-collaborators-to-a-personal-repository/))

Человек без прав на запись, может ["форкнуть" (скопировать) репо](https://help.github.com/articles/fork-a-repo/), а не вносить изменения в ветку в том же проекте. Однако копирование проекта клонирует весь репозиторий, а не создает ветку в том же репозитории. Форк (копия) будет существовать в учетной записи пользователя GitHub. Можно объединить форкнутый репозиторий (это типичная модель для опен-сорс проектов со многими внешними участниками), но этот сценарий, вероятно, менее распространен для технических писателей, работающих с разработчиками в тех же проектах.

Для добавления соавторов в проект:

1. В репозитории проекта переходи на вкладку "Settings".
2. Нажимаем на кнопку `Collaborators` в левой части.
3. Вводим имена пользователей Github тех, кому хотим дать доступ в области Collaborator.
4. Нажимаем на кнопку `Add collaborator`.
